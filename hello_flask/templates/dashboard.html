<!DOCTYPE html> 
<html lang="en" style ="width: 100%;
height: 100%;
margin: 0px;
padding: 0px;
overflow-x: hidden; "> 
  
<head> 
    <title>CIPACTLI</title> 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    
  </head> 
  
<body style="background-color:#e9f5e8;idth: 100%;
height: 100%;
margin: 0px;
padding: 0px;
overflow-x: hidden; "> 

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/30a673319c.js" crossorigin="anonymous"></script>

    <!--Navbar-->
    {% include 'navbar.html' %}

    <h1 style = "padding-left: 10%; padding-top: 4%;">Dashboard</h1>
    <br>

    <div style="padding-right: 10%; padding-left: 10%;">
      <div class="form-row">
        <div class="form-group col-md-4">
          <select class="form-control select2" id="countrySelect">
            <option value="" selected>Select country</option>
            {% for a in countries %}
              <option value="{{a}}">{{a}}</option>
            {% endfor %} 
          </select>
        </div>
        <div class="form-group col-md-4">
          <select class="form-control select2" id="regionSelect">
            <option value="" selected>Select region</option>
          </select>
        </div>
        <div class="form-group col-md-4">
          <select class="form-control select2" id="siteSelect">
            <option value="" selected>Select site</option>
          </select>
        </div>
      </div>
    </div>

    <br>

      <div class="card-deck" style="padding-right: 10%; padding-left: 10%;">
        <div class="card text-center" style="border-radius: 20px; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
          <img class="card-img-top" src="{{ url_for('static', filename='images/plot.png') }}" alt="Card image cap" style="border-radius: 20px;">
          <div class="card-body">
            <h5 class="card-title">Card title</h5>
          </div>
        </div>
        <div class="card text-center" style="border-radius: 20px; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
          <img class="card-img-top" src="{{ url_for('static', filename='images/plot.png') }}" alt="Card image cap" style="border-radius: 20px;">
          <div class="card-body">
            <h5 class="card-title">Card title</h5>
          </div>
        </div>
        <div class="card text-center" style="border-radius: 20px; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
          <img class="card-img-top" src="{{ url_for('static', filename='images/plot.png') }}" alt="Card image cap" style="border-radius: 20px;">
          <div class="card-body">
            <h5 class="card-title">Card title</h5>
          </div>
        </div>
      </div>
    
    <br> <br>


    <script>
      $("#countrySelect").on('change', function() {
          $("#regionSelect").html(`<option value="">Select region</option>`);
          if(this.value != "") {
            $.ajax({
              url: "/regions-by-country",
              data: {country: this.value},
              method: "get",
              dataType: "json",
              success: function(data) {
                regions = data.result;
                regions.forEach((r) => $("#regionSelect").append(`<option value="${r}">${r}</option>`));
              },
              fail: function(data) {
                console.log(data)
              }
            });
          }
       });

       $("#regionSelect").on('change', function() {
          $("#siteSelect").html(`<option value="">Select site</option>`);
          if(this.value != "") {
            $.ajax({
            url: "/sites-by-region",
            data: {region: this.value},
            method: "get",
            dataType: "json",
            success: function(data) {
              sites = data.result;
              sites.forEach((s) => $("#siteSelect").append(`<option value="${s}">${s}</option>`));
            },
            fail: function(data) {
              console.log(data)
            }
          });
        }
       });
    </script>

    <!--Footer-->
    {% include 'footer.html' %}
</body> 
  
</html>
